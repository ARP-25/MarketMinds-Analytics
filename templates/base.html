{% load static %}
<!doctype html>
<html lang="en">

<head>
  {% block meta %}
  <meta http-equiv="X-UA-Compatible" content="ie-edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description"
    content="MarketMinds Analytics offers professional market analyses and trading insights for successful traders. Gain profound insights into financial markets, maximize your trading success, and explore the world of Bitcoin, Forex, and Stocks. Subscribe today!">
  <meta name="keywords"
    content="Market analyses, Trading, Subscriptions, Trading insights, Financial markets, Successful trading, Bitcoin, Forex, Stocks">
  {% endblock %}

  {% block extra_meta %}
  {% endblock %}

  {% block corecss %}
  <!-- Bootstrap  -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <!-- Font Awesome  -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />
  <!-- Main CSS -->
  <link rel="stylesheet" type="text/css" href="{% static 'css/base.css' %}">
  {% endblock %}

  {% block extra_css %}
  {% endblock %}

  {% block corejs %}
  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- Bootstrap JS (with Popper.js) -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Main JS -->
  <script src="{% static 'js/base.js' %}"></script>
  {% endblock %}

  {% block extra_js %}
  {% endblock %}
  <link rel="icon" type="image/x-icon"
    href="https://www.cash-online.de/wp-content/uploads/2022/12/shutterstock_1808982073.jpg" />
  <title>MarketMinds Analytics {% block extra_title %}{% endblock %}</title>
</head>

<body>
  <header class="container-fluid py-1 px-lg-5 sticky">
    <div class="row">
      <div class="offset col-6 offset-lg-0 col-lg-3 d-flex align-items-center justify-content-start">
        <a href="{% url 'home' %}" aria-label="Home">
          <span class="logo-1">MarketMinds</span>
          <span class="logo-2">Analytics</span>
        </a>
      </div>
  
      <nav class="main-nav col-6">
        <div class="d-flex justify-content-center">
          <a href="{% url 'home' %}" class="nav-link nav-element" aria-label="Home">
            <p class="nav-p">Home</p>
          </a>
          <a href="{% url 'trade_insights' %}" class="nav-link nav-element" aria-label="Trade Insights">
            <p class="nav-p">Trade Insights</p>
          </a>
          <a href="{% url 'get_started' %}" class="nav-link nav-element" aria-label="Get Started">
            <p class="nav-p">Get Started</p>
          </a>
        </div>
      </nav>
  
      <div class="col-6 col-lg-3 d-flex align-items-center justify-content-end">
        <button class="hamburger mr-sm-3" aria-label="Menu">
          <div class="bar"></div>
        </button>
  
        <a href="#" class="inherit-color nav-element mr-sm-3 pr-lg-3 p-2 p-l-3" id="dropdownMenu"
          aria-label="Profile Dropdown Menu">
          <p class="nav-p nav-fa mb-0"><i class="far fa-user"></i></p>
        </a>
  
        <div class="dropdown-content bg-color-secondary" id="myDropdown">
          {% if not user.is_authenticated %}
          <a class="d-block element p-1 m-1" href="{% url 'account_login' %}" aria-label="Login">Login</a>
          <a class="d-block element p-1 m-1" href="{% url 'account_signup' %}" aria-label="Register">Register</a>
          {% elif user.is_authenticated %}
          <a class="d-block element p-1 m-1" href="{% url 'account_logout' %}" aria-label="Logout">Logout</a>
          <a class="d-block element p-1 m-1" href="{% url 'view_profile' %}" aria-label="Profile Info">Profile Info</a>
          {% if user.is_superuser %}
          <a class="d-block element p-1 m-1" href="{% url 'admin_access' %}" aria-label="Admin Access">Admin Access</a>
          {% endif %}
          {% endif %}
        </div>
        
        <a href="{% url 'bag' %}" class="inherit-color nav-element pr-lg-2 p-2 p-l-3" id="dropdownBag" aria-label="Shopping Bag">
          <p class="nav-p nav-fa mb-0" style="position: relative;">
            <i class="fas fa-shopping-bag"></i>
            {% if bag_items|length > 0 %}
            <span class="badge">{{ bag_items|length }}</span>
            {% endif %}
          </p>
        </a>
  
        <div class="dropdown-content-bag bg-color-secondary p-2" id="myDropdownBag">
          <div class="orange-line"></div>
          <p class="logo-font text-center"><strong>Shopping Bag</strong></p>
          <div class="orange-line"></div>
          <div class="row">
            <div class="container" style="padding-left: 25px;
            padding-right: 25px;">
              <div class="row">
                <div class="col-7 text-secondary-custom pb-1">Product Info</div>
                <div class="col-5 text-secondary-custom text-right">Price</div>
              </div>
              {% for item_id in bag_items %}
              {% for subscription_plan in subscription_plans %}
              {% if subscription_plan.id == item_id|add:0 %}
              <div class="row">
                <div class="col-3 square-image p-1 pl-3" style="height: auto" >
                  <img src="{{ subscription_plan.image.url }}" alt="{{ s.title }}">
                </div>
                <div class="col-4 d-flex align-items-center tex">
                  <p class="bag-titles" style="font-size:100%">{{ subscription_plan.title }}</p>
                </div>
                <div class="col-5 d-flex align-items-center justify-content-end">
                  <p>{{ subscription_plan.price }} $ /mo.</p>
                </div>
              </div>
              {% endif %}
              {% endfor %}
              {% endfor %}
              <div class="orange-line"></div>
              <div class="row">
                <div class="offset-4 col-2 text-right">
                  <p class="text-secondary-custom">Total:</p>
                </div>
                <div class="col-6 text-right">
                  <strong>
                    <p>{{ total }} $ /mo.</p>
                  </strong>
                </div>
              </div>
              <div class="row">
                <div class="col-12 text-center">
                  <div class="pb-3">
                    {% if not bag_items %}
                    <button type="submit" class="button-62 btn-bag" aria-label="Secure Checkout Button Disabled" disabled>
                      <i class="fa-solid fa-lock pr-1"></i> Secure Checkout
                    </button>
                    {% else %}
                    <a href="{% url 'checkout' %}" aria-label="Secure Checkout">
                      <button type="submit" class="button-62 btn-bag" aria-label="Secure Checkout Button">
                        <i class="fa-solid fa-lock pr-1"></i> Secure Checkout
                      </button>
                    </a>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>
  
  <nav class="mobile-nav">
    <a href="{% url 'home' %}" class="nav-link nav-element">
      <p class="nav-p">Home</p>
    </a>
    <a href="{% url 'trade_insights' %}" class="nav-link nav-element">
      <p class="nav-p">Trade Insight</p>
    </a>
    <a href="{% url 'get_started' %}" class="nav-link nav-element">
      <p class="nav-p">Get Started</p>
    </a>
  </nav>

  {% block page_header %}
  {% endblock %}

  {% block content %}
  {% endblock %}

  {% if messages %}
  <div class="message-container">
    {% for message in messages %}
    {% with message.level as level %}
    {% if level == 40 %}
    {% include 'includes/toasts/toast_error.html' %}
    {% elif level == 25 %}
    {% include 'includes/toasts/toast_success.html' %}
    {% else %}
    {% include 'includes/toasts/toast_info.html' %}
    {% endif %}
    {% endwith %}
    {% endfor %}
  </div>
  {% endif %}

  <footer class="pt-3 pt-sm-0 ">
    <div class="container-fluid mt-5">
      <div class="row">
        <div class="col-10 offset-1">
          <div class="white-line"></div>
        </div>
      </div>
    </div>
    <div class="row pt-3 pb-5 d-flex justify-content-center">
      <p class="text-secondary-custom pr-3">
        Copyright
      </p>
      <p class="text-center">
        <strong>Â© 2023 ARP-25</strong>
      </p>
    </div>
  </footer>
  {% block postloadjs %}
  {{ block.super }}
  <!-- Toasts -->
  <script type="text/javascript">
    $(document).ready(function () {
      $('.toast').addClass('toast-in');
      $('.toast').toast({
        'autohide': false
    });
      $('.toast').toast('show');
      setTimeout(function() {
        $('.toast').addClass('toast-out');
    }, 3000);
    });
    $('.btn-close').on('click', function() {
      $(this).closest('.toast').toast('hide');
    });
  </script>

  <!-- Arrow -->
  <script type="text/javascript">
    $(document).ready(function(){
      $('.arrow-container').on('click', function() {
        var currentScroll = $(window).scrollTop();
        var viewportHeight = $(window).height();
        var newScroll = currentScroll + viewportHeight*1.05 ;
        $('html, body').animate({ scrollTop: newScroll }, 'slow');
      });
    });
  </script>
  
  <!-- Hamburger -->
  <script type="text/javascript">
    window.onload = function () {
      const menu_btn = document.querySelector('.hamburger');
      const mobile_menu = document.querySelector('.mobile-nav');
      menu_btn.addEventListener('click', function () {
        menu_btn.classList.toggle('is-active');
        mobile_menu.classList.toggle('is-active');
      })
    }
  </script>
  {% endblock %}
</body>
</html>